<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.1/css/all.css"
      integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/utilities.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- <script src="tableManager.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/simplePagination.js/1.4/jquery.simplePagination.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/fontawesome.min.css" />
    <link type="text/css" rel="stylesheet" href="css/simplePagination.css" />
    <title>Customer Satisfaction</title>
  </head>
  <body>
    <!--Navbar-->
    <header class="nav-header">
      <div class="navbar-container">
        <div class="navbar-img">
          <!-- <img src="images/hulo-brwn.png" alt="Hulo Logo" /> -->
          <img id="nav-logo" alt="Hulo Logo" />
        </div>
        <div class="toggle">
          <a href="javascript:void(0);" class="ham-burger">
            <span></span>
            <span></span>
            <span></span>
          </a>
        </div>
        <div class="navbar">
          <ul>
            <li><a id="index" href="index.html">Home</a></li>
            <li><a id="about" href="about.html">About Us</a></li>
            <li><a id="villa" href="villa.html">Villas</a></li>
            <li><a id="Moments" href="Moments.html">Moments</a></li>
            <li><a id="login-reg" href="login-reg.html">Log In</a></li>
            <div class="book-btn bounce-in-on-hover">
              <a class="book-btn" href="c-booknow.html">BOOK NOW</a>
            </div>
          </ul>
        </div>
      </div>
    </header>
    <!--End of Navbar-->
    <section class="cs-header">
      <h1>CUSTOMER SATISFACTION</h1>
    </section>
    <div class="section-stroke">
      <img src="images/brush-stroke.png" />
    </div>
    <section class="bodycs">
      <div class="container-cs">
        <div class="display-cs" id="display_cs">
          <div class="list-wrapper" id="cs-body"></div>
          <!-- <div class="cs-card">
            <div class="cs-card-body">
              <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aspernatur tenetur distinctio neque?</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>USER NAME</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/neutral.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div>
          <div class="cs-card">
            <div class="cs-card-body">
              <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aspernatur tenetur distinctio neque?</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>USER NAME</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/neutral.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div>
          <div class="cs-card">
            <div class="cs-card-body">
              <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aspernatur tenetur distinctio neque?</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>USER NAME</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/neutral.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div>
          <div class="cs-card">
            <div class="cs-card-body">
              <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aspernatur tenetur distinctio neque?</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>USER NAME</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/neutral.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div>
          <div class="cs-card">
            <div class="cs-card-body">
              <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Aspernatur tenetur distinctio neque?</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>USER NAME</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/neutral.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div> -->
        </div>
      </div>
      <div id="pagination-container"></div>
    </section>
    <!--Footer-->
    <footer>
      <div class="footer-content">
        <div class="footer-left footer-box">
          <div class="upper">
            <div class="logo-footer">
              <!-- <img src="images/hulo-white.png" alt="Hulo Logo" /> -->
              <img id="footer-logo" alt="Hulo Logo" />
            </div>
          </div>
        </div>
        <div class="footer-middle footer-box">
          <div class="topic">Quick Links</div>
          <div><a href="villa.html">Villas</a></div>
          <div><a href="about.html">About Us</a></div>
          <div><a href="contact.html">Contact Us</a></div>
          <div><a href="faqs.html">FAQs</a></div>
          <div><a href="tnc.html">Terms & Condition</a></div>
        </div>
        <div class="footer-right footer-box">
          <div class="topic">Stay in touch</div>
          <form action="#">
            <input type="submit" name="" value="BOOK NOW" />
            <div class="media-icons">
              <a id="fb_link" href="#"><i class="fab fa-facebook-f"></i></a>
              <a id="ig_link" href="#"><i class="fab fa-instagram"></i></a>
              <!-- <a id="" href="#"><i class="fas fa-envelope"></i></a> -->
            </div>
          </form>
        </div>
      </div>
      <div class="bottom" id="footer-btm">
        <p>Copyright Â© 2022 ULAYAW. All Rights Reserved.</p>
      </div>
    </footer>
    <script src="app.js"></script>
    <script>
      // //Import Navbar
      // $(function () {
      //   $("#nav-placeholder").load("navbar.html");
      // });

      // //Import Footer
      // $(function () {
      //   $("#footer-placeholder").load("footer.html");
      // });

      const allCS = () => {
        let options = {
          method: "GET",
          headers: {
            "Content-Type": "application/json;charset=utf-8",
            // Authorization: "Bearer " + localStorage.getItem("access_token"),
          },
        };
        fetch("https://ulayaw-app.azurewebsites.net/user/customerSatisfaction", options)
          .then((response) => response.json())
          .then((data) => {
            let icon;
            console.log(data);
            data.payload.forEach((cs) => {
              switch (cs.feedback.rating) {
                case 1:
                  icon = "sad";
                  break;
                case 2:
                  icon = "neutral";
                  break;
                case 3:
                  icon = "happy";
                  break;
              }

              $("#cs-body").append(`

            <div class="list-item cs-card">
            <div class="cs-card-body">
              <p>${cs.feedback.description}</p>
              <div class="cs-user">
                <div class="user-info">
                  <h5>${cs.firstName} ${cs.lastName}</h5>
                </div>
                <div class="user-img">
                  <img id="cs-img0" src="icons/${icon}.png" class="rounded-circle img-fluid" />
                </div>
              </div>
            </div>
          </div>

              `);
            });

            var items = $(".list-wrapper .list-item");
            var numItems = items.length;
            var perPage = 20;

            items.slice(perPage).hide();

            $("#pagination-container").pagination({
              items: numItems,
              itemsOnPage: perPage,
              prevText: "&laquo;",
              nextText: "&raquo;",
              cssStyle: "light-theme",
              onPageClick: function (pageNumber) {
                var showFrom = perPage * (pageNumber - 1);
                var showTo = showFrom + perPage;
                items.hide().slice(showFrom, showTo).show();
              },
            });
          });
      };
      allCS();

      //navbar
      changeLoginToProfile();
      // nav underline
      switch (window.location.pathname) {
        case "/villa.html":
          document.getElementById("villa").classList.add("active");
          break;
        case "/index.html":
          document.getElementById("index").classList.add("active");
          break;
        case "/about.html":
          document.getElementById("about").classList.add("active");
          break;
        case "/moments.html":
          document.getElementById("moments").classList.add("active");
          break;
      }

      $(window).on("beforeunload", function () {
        console.log(window.location.pathname);
        switch (window.location.pathname) {
          case "/villa.html":
            const chosen = document.getElementById("villas");
            console.log(chosen);
            document.getElementById("villas").classList.add("active");
            console.log("here");
            break;
          case "/villa.html":
            break;
          case "/villa.html":
            break;
          case "/villa.html":
            break;
          case "/villa.html":
            break;
          case "/villa.html":
            break;
        }
      });

      //Navbar Effect
      $(document).ready(function () {
        var bottom = $(".nav-header").outerHeight();
        var header = $(".nav-header").offset().top + bottom;

        $(window).scroll(function () {
          if ($(window).width() > 991) {
            if ($(window).scrollTop() >= header) {
              $(".nav-header").addClass("sticky");
            } else {
              $(".nav-header").removeClass("sticky");
            }
          }
        });

        $(".navbar ul li a").click(function () {
          $(".navbar ul li a").removeClass("active");
          $(this).addClass("active");
        });

        $(".ham-burger").click(function () {
          $(this).toggleClass("active");
          $(".navbar").toggleClass("open");
        });
      });

      const displayLogoNav = () => {
        let options = {
          method: "GET",
          headers: {
            "Content-Type": "application/json;charset=utf-8",
          },
        };

        fetch("https://ulayaw-app.azurewebsites.net/application/get", options)
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            document.getElementById("nav-logo").src = data.payload.businessLogo;
          });
      };
      displayLogoNav();
      //end of navbar

      //footer
      const displayInfo2 = () => {
        let options = {
          method: "GET",
          headers: {
            "Content-Type": "application/json;charset=utf-8",
          },
        };

        fetch("https://ulayaw-app.azurewebsites.net/application/get", options)
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            document.getElementById("fb_link").href = data.payload.fbLink;
            document.getElementById("ig_link").href = data.payload.instaLink;
            document.getElementById("footer-logo").src = data.payload.businessLogo;
          });
      };
      displayInfo2();
      //end of footer
    </script>
  </body>
</html>
