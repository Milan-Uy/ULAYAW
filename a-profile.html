<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/utilities.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link href="https://fonts.googleapis.com/css?family=Cinzel" rel="stylesheet" />
    <link href="https://cdn.materialdesignicons.com/1.8.36/css/materialdesignicons.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css" />
    <title>Profile</title>
  </head>
  <body>
    <!--Navbar-->
    <section class="display-navbar">
      <div id="nav-placeholder"></div>
    </section>
    <!--Profile-->
    <section class="sidebar-tabs">
      <div class="sidebar container">
        <!--Sidebar-->
        <div class="tabs-wrapper">
          <ul class="tabs">
            <!--List of Tabs-->
            <li class="tab-active" rel="tabОne">
              <i class="material-symbols-rounded">dashboard </i>
              <span class="label">Dashboard</span>
            </li>
            <li rel="tabTwo">
              <i class="material-symbols-rounded">manage_accounts</i>
              <span class="label">Manage Users</span>
            </li>
            <li rel="tabThree">
              <i class="material-symbols-rounded">group_add</i>
              <span class="label"> Add User</span>
            </li>
            <li rel="tabFour">
              <i class="material-symbols-rounded">update</i>
              <span class="label"> Update Application</span>
            </li>
            <li rel="tabFive">
              <i class="material-symbols-rounded">logout</i>
              <span class="label">Logout</span>
            </li>
          </ul>
          <div class="tabs-container">
            <!-- Dashboard Tab-->
            <h4 class="tab-accordion-active tab-accordion-title" rel="tabОne">Dashboard</h4>
            <div id="tabОne" class="tab-item">
              <h5>Dashboard</h5>
              <div class="app-overview">
                <div class="main-header">Application Overview</div>
                <ul class="grid">
                  <button>
                    <li class="grid-item">
                      <i class="material-symbols-rounded"> groups </i>
                      <h3>98 users</h3>
                    </li>
                  </button>
                  <button>
                    <li class="grid-item">
                      <i class="material-symbols-rounded"> forum </i>
                      <h3>71 feedbacks</h3>
                    </li>
                  </button>
                  <button>
                    <li class="grid-item">
                      <i class="material-symbols-rounded"> perm_media </i>
                      <h3>90 moments</h3>
                    </li>
                  </button>
                </ul>
              </div>
              <div class="manage-overview">
                <div class="overviewcard">
                  <div class="main-header">User Management</div>
                  <ul class="grid">
                    <button>
                      <li class="grid-item first">
                        <i class="material-symbols-rounded">manage_accounts</i>
                        <h3>Manage Users</h3>
                      </li>
                    </button>
                    <button>
                      <li class="grid-item last">
                        <i class="material-symbols-rounded"> group_add </i>
                        <h3>Add New Users</h3>
                      </li>
                    </button>
                  </ul>
                </div>
                <div class="overviewcard">
                  <div class="main-header">Application Management</div>
                  <ul class="grid">
                    <button>
                      <li class="grid-item first">
                        <i class="material-symbols-rounded"> update </i>
                        <h3>Update Application</h3>
                      </li>
                    </button>
                  </ul>
                </div>
              </div>
            </div>
            <!--Manage Users Tab-->
            <h4 class="tab-accordion-title" rel="tabTwo">Manage Users</h4>
            <div id="tabTwo" class="tab-item">
              <h5 class="tabs-title">Manage Users</h5>

              <input type="text" id="myInput" onkeyup="view_user()" placeholder="Search Users.." class="search-mu" />

              <table id="myTable">
                <thead>
                   <tr class="header">
                      <th style="width:50%;">User</th>
                      <th style="width:40%;">Role</th>
                      <th style= "width:10%;"> </th>
                   </tr>
                </thead>
                <tbody id="table_users">
                   <tr>
                      <td>Millano Uy</td>
                      <td>
                         Admin
                         <div class="dropdown">
                            <li><a href = "#"> <i class="fas fa-cog" style= "color: #473a3a;"></i> </a></li>
                            <div class="dropdown-content">
                               <a class = "dd-content edit-popup" href = "#"> Marketing Specialist </a>
                               <a class = "dd-content edit-popup" href = "#"> Manager </a>
                               <a class = "dd-content edit-popup" href = "#"> Admin </a>
                            </div>
                         </div>
                      </td>
                      <td>
                         <div class="dropdown">
                            <li><a href = "#"> <i class="fas fa-ellipsis-v" style= "color: #473a3a;"></i> </a></li>
                            <div class="dropdown-content ">
                               <a class = "dd-content remove-user" href = "#"> Remove User </a>
                               <a class = "dd-content edit-profile" href = "#"> Edit Profile </a>
                            </div>
                         </div>
                      </td>
                   </tr>
                   <tr>
                      <td> Ricko Ronquillo </td>
                      <td>
                         Manager
                         <div class="dropdown">
                            <li><a href = "#"> <i class="fas fa-cog" style= "color: #473a3a;"></i> </a></li>
                            <div class="dropdown-content">
                              <a class = "dd-content edit-popup" href = "#"> Marketing Specialist </a>
                              <a class = "dd-content edit-popup" href = "#"> Manager </a>
                              <a class = "dd-content edit-popup" href = "#"> Admin </a>
                            </div>
                         </div>
                      </div>
                   </td>
                   <td>
                    <div class="dropdown">
                     <li ><a href = "#"> <i class="fas fa-ellipsis-v" style= "color: #473a3a;"></i> </a></li>
                     <div class="dropdown-content">
                      <a class = "dd-content remove-user" href = "#"> Remove User </a>
                      <a class = "dd-content edit-profile" href = "#"> Edit Profile </a>
                   </div>
                </div>
                </td>
                 </tr>
                 <tr>
                   <td>Nicky Merito</td>
                   <td>Marketing Specialist
                   <div class="dropdown">
                    <li><a href = "#"> <i class="fas fa-cog" style= "color: #473a3a;"></i> </a></li>
                   <div class="dropdown-content">
                    <a class = "dd-content edit-popup" href = "#"> Marketing Specialist </a>
                    <a class = "dd-content edit-popup" href = "#"> Manager </a>
                    <a class = "dd-content edit-popup" href = "#"> Admin </a>
                </div>
             </div>
          </td>
          <td>
             <div class="dropdown">
                <li><a href = "#"> <i class="fas fa-ellipsis-v" style= "color: #473a3a;"></i> </a></li>
                <div class="dropdown-content">
                   <a class = "dd-content remove-user" href = "#"> Remove User </a>
                   <a class = "dd-content edit-profile" href = "#"> Edit Profile </a>
                </div>
             </div>
          </td>
       </tr>
    </tbody>
 </table>
            </div>
            <!--Add Users Tab-->
            <h4 class="tab-accordion-title" rel="tabThree">Add User</h4>
            <div id="tabThree" class="tab-item">
              <h5>Add New User</h5>
              <div class="adduser-container">
                <div class="form-box">
                  <form class="adduser-form">
                    <div class="form-container">
                      <div class="col-6">
                        <label>First Name</label>
                        <input class="adduser-input" type="text" placeholder="Enter your name" required />
                      </div>
                      <div class="col-6">
                        <label>Last Name</label>
                        <input class="adduser-input" type="text" placeholder="Enter your name" required />
                      </div>
                    </div>
                    <div class="form-container">
                      <div class="col-3">
                        <label>Contact Number</label>
                        <input
                          class="adduser-input"
                          type="text"
                          id="contact"
                          placeholder="Contact Number"
                          maxlength="13"
                          value="+63"
                          style="width: 40%"
                          required
                        />
                      </div>
                    </div>
                    <div class="form-container">
                      <div class="col-3">
                        <label>Email Address</label>
                        <input class="adduser-input" type="email" id="email" placeholder="Enter your name" style="width: 60%" required />
                      </div>
                    </div>
                    <div class="form-container">
                      <div class="col-6">
                        <label>Password</label>
                        <input class="adduser-input" type="password" placeholder="Enter your password" required />
                      </div>
                      <div class="col-6">
                        <label>Confirm Password</label>
                        <input class="adduser-input" type="password" placeholder="Confirm your password" required />
                      </div>
                    </div>
                    <div class="form-container">
                      <div class="col-3">
                        <label>Role</label>
                        <input class="adduser-input" type="text" placeholder="Role" style="width: 49%" required />
                      </div>
                    </div>
                    <button class="adduser-btn" onclick="()">Add User</button>
                  </form>
                </div>
              </div>
            </div>
              <!-- Update Application Tab-->
              <h4 class="tab-accordion-title" rel="tabFour">Update Application</h4>
              <div id="tabFour" class="tab-item updateapp">
                <h5>Update Application</h5>
                <div class="update-container">
                  <div class="app-details">
                     <h4>Basic Information</h4>
                     <button class="editapp-btn" onclick="()">Edit</button>
                  </div>
                  <div class="form-box">
                     <form class="update-form">
                        <div class="form-container">
                           <div class="col-3">
                              <label>Contact Number</label>
                              <input  type="text" id="contact" placeholder="+639121569632" maxlength="13" value="+63" readonly/>
                           </div>
                        </div>
                        <div class="form-container">
                          <div class="col-3">
                             <label>Location</label>
                             <input id="lastname" type="text" placeholder="Abucay, Bataan, Philippines" readonly/>
                          </div>
                       </div>
                        <div class="form-container">
                           <div class="col-3">
                              <label>Email Address</label>
                              <input  type="email" id="email" placeholder="huloleisurefarm@gmail.com" readonly/>
                           </div>
                        </div>
                        <div class="form-container">
                           <div class="col-3">
                              <label>Facebook Link</label>
                              <input  type="email" id="email" placeholder="https://www.facebook.com/huloleisurefarm/" readonly/>
                           </div>
                        </div>
                        <div class="form-container">
                          <div class="col-3">
                             <label>Instagram Link</label>
                             <input  type="email" id="email" placeholder="https://www.instagram.com/huloleisurefarm/" readonly/>
                          </div>
                       </div>
                       <div class="form-container">
                        <div class="col-3">
                           <label>Business Logo</label>
                           <div class="business-logo">
                            <div class="logo-upload">
                               <div class="drop-logo">
                                  <h6 class="image-txt">CHANGE AVATAR</h6>
                                  <input type="file" accept="image/*" id="input-logo" hidden>
                               </div>
                            </div>
                         </div>
                        </div>
                     </div>
                     </form>
                  </div>
               </div>
               <div class="villa-container">
                <h4>Villa</h4>
                <div class="villa-card">
                  <div class="villa-pic">
                    <div class="photo" style="background-image: url(images/casa_aurelia.JPG)"></div>
                  </div>
                  <div class="villa-desc">
                    <h1>
                      Casa Aurelia
                    </h1>
                    <div class="edit-accord">
                      <div class="edit-accordion js-accordion">
                        <div class="accordion__item js-accordion-item">
                          <div class="accordion-header js-accordion-header">Edit Details</div> 
                          <div class="accordion-body js-accordion-body">
                            <div class="accordion-body__contents">
                              <form class="edit-villadetails">
                                <div class="edit-villadesc">
                                    <label>Description</label>
                                   <textarea id="moment-txt" name="moment-txt" placeholder="Write the description here...">Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos sequi placeat distinctio dolor, amet magnam voluptatibus eos ex vero, sunt veritatis esse. Nostrum voluptatum et repudiandae vel sed, explicabo in?</textarea>
                                </div>
                                <div class="edit-villainc">
                                  <label>Inclusions</label>
                                  <textarea id="moment-txt" name="moment-txt" placeholder="Write the inclusions here...">Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos sequi placeat distinctio dolor, amet magnam voluptatibus eos ex vero, sunt veritatis esse. Nostrum voluptatum et repudiandae vel sed, explicabo in?</textarea>
                               </div>
                               <div class="edit-villaprice">
                                <label>Price</label>
                                <input class="new-villaprice" type="text" required />
                               </div>
                               <div class="editvilla-btn">
                                <button class="canceledit-btn" onclick="()">Cancel</button>
                                <button class="saveedit-btn" onclick="()">Save Changes</button>
                               </div>
                              </form>
                            </div>
                          </div>
                        </div><!-- end of accordion body -->
                        <div class="accordion__item js-accordion-item">
                          <div class="accordion-header js-accordion-header">Edit Pictures</div> 
                          <div class="accordion-body js-accordion-body">
                            <div class="accordion-body__contents upload-accord">
                              <div class="wrapper">
                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>
                              </div>

                              <div class="editvilla-btn photos">
                                <button class="canceledit-btn" onclick="()">Cancel</button>
                                <button class="saveedit-btn" onclick="()">Save Changes</button>
                               </div>
                            </div>
                          </div>
                        </div><!-- end of accordion body -->
                      </div>
                    </div>
              </div>
                </div>
                <div class="villa-card">
                  <div class="villa-pic">
                    <div class="photo" style="background-image: url(images/casa_salud.JPG)"></div>
                  </div>
                  <div class="villa-desc">
                    <h1>
                      Casa Salud
                    </h1>
                    <div class="edit-accord">
                      <div class="edit-accordion js-accordion">
                        <div class="accordion__item js-accordion-item">
                          <div class="accordion-header js-accordion-header">Edit Details</div> 
                          <div class="accordion-body js-accordion-body">
                            <div class="accordion-body__contents">
                              <form class="edit-villadetails">
                                <div class="edit-villadesc">
                                    <label>Description</label>
                                   <textarea id="moment-txt" name="moment-txt" placeholder="Write the description here...">Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos sequi placeat distinctio dolor, amet magnam voluptatibus eos ex vero, sunt veritatis esse. Nostrum voluptatum et repudiandae vel sed, explicabo in?</textarea>
                                </div>
                                <div class="edit-villainc">
                                  <label>Inclusions</label>
                                  <textarea id="moment-txt" name="moment-txt" placeholder="Write the inclusions here...">Lorem ipsum dolor sit amet consectetur adipisicing elit. Dignissimos sequi placeat distinctio dolor, amet magnam voluptatibus eos ex vero, sunt veritatis esse. Nostrum voluptatum et repudiandae vel sed, explicabo in?</textarea>
                               </div>
                               <div class="edit-villaprice">
                                <label>Price</label>
                                <input class="new-villaprice" type="text" required />
                               </div>
                               <div class="editvilla-btn">
                                <button class="canceledit-btn" onclick="()">Cancel</button>
                                <button class="saveedit-btn" onclick="()">Save Changes</button>
                               </div>
                              </form>
                            </div>
                          </div>
                        </div><!-- end of accordion body -->
                        <div class="accordion__item js-accordion-item">
                          <div class="accordion-header js-accordion-header">Edit Pictures</div> 
                          <div class="accordion-body js-accordion-body">
                            <div class="accordion-body__contents upload-accord">
                              <div class="wrapper">
                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>

                                <div class="box">
                                  <div class="js--image-preview"></div>
                                  <div class="upload-options">
                                    <label>
                                      <input type="file" class="image-upload" accept="image/*" />
                                    </label>
                                  </div>
                                </div>
                              </div>

                              <div class="editvilla-btn photos">
                                <button class="canceledit-btn" onclick="()">Cancel</button>
                                <button class="saveedit-btn" onclick="()">Save Changes</button>
                               </div>
                            </div>
                          </div>
                        </div><!-- end of accordion body -->
                      </div>
                    </div>
              </div>
            </div>
            <!--Logout Tab-->
            <h4 class="tab-accordion-title" rel="tabFive">Logout</h4>
            <div id="tabFive" class="tab-item">
              <h5>Logout</h5>
              <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quam, quos dolorum mollitia magnam tempore nulla aliquam delectus molestias
                quia distinctio nesciunt soluta expedita fugit possimus ad labore? Obcaecati molestias aperiam exercitationem expedita provident
                numquam tempora nulla, beatae ab modi, molestiae, eius iure odio dolorum recusandae est. Distinctio a possimus placeat dolore iste
                animi aspernatur. Eius ea doloremque blanditiis, esse dolores sit ipsa molestiae expedita accusamus eos, labore ipsam iste ducimus
                optio itaque provident voluptate reprehenderit libero cum atque in porro. Iste, nihil? Ea temporibus tempore optio quis autem soluta
                voluptate. Doloribus perspiciatis impedit iure neque, hic exercitationem voluptates laudantium accusamus?
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script>
      //Import Navbar
      $(function () {
        $("#nav-placeholder").load("navbar.html");
      });

      //Tabs
      jQuery(".tab-item").hide();
      jQuery(".tab-item:first").show();

      jQuery("ul.tabs li").click(function () {
        jQuery(".tab-item").hide();
        var activeTab = $(this).attr("rel");
        jQuery("#" + activeTab).fadeIn();

        jQuery("ul.tabs li").removeClass("tab-active");
        jQuery(this).addClass("tab-active");

        jQuery(".tab-accordion-title").removeClass("tab-accordion-active");
        jQuery(".tab-accordion-title[rel^='" + activeTab + "']").addClass("tab-accordion-active");
      });

      jQuery(".tab-accordion-title").click(function () {
        jQuery(".tab-item").hide();
        var d_activeTab = $(this).attr("rel");
        jQuery("#" + d_activeTab).fadeIn();

        jQuery(".tab-accordion-title").removeClass("tab-accordion-active");
        jQuery(this).addClass("tab-accordion-active");

        jQuery("ul.tabs li").removeClass("tab-active");
        jQuery("ul.tabs li[rel^='" + d_activeTab + "']").addClass("tab-active");
      });

      /*dropdown for manage users */
      function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
      }

      // Close the dropdown if the user clicks outside of it
      window.onclick = function (event) {
        if (!event.target.matches(".dropbtn")) {
          var dropdowns = document.getElementsByClassName("dropdown-content");
          var i;
          for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains("show")) {
              openDropdown.classList.remove("show");
            }
          }
        }
      };

        //upload pic
        const dropArea = document.querySelector('.drop-logo');
         const inputFile = document.getElementById('input-logo');

         dropArea.addEventListener('click', function () {
            inputFile.click()
         })

         inputFile.addEventListener('change', function () {
            const file = this.files[0];

            if(file.type.startsWith('image/')) {
               if(file.size < 2000000) {
                  create_thumbnail(file);
               } else {
                  alert('Image size must be less than 2MB');
               }
            } else {
               alert('Must be image');
            }
         })

         dropArea.addEventListener('dragover', function (e) {
            e.preventDefault();
            this.style.borderStyle = 'solid';

            const h3 = this.querySelector('h3');
            h3.textContent = 'Release here to upload image';
         })

         dropArea.addEventListener('drop', function (e) {
            e.preventDefault();

            inputFile.files = e.dataTransfer.files;
            const file = e.dataTransfer.files[0];

            if(file.type.startsWith('image/')) {
               if(file.size < 2000000) {
                  create_thumbnail(file);
               } else {
                  alert('Image size must be less than 2MB');
               }
            } else {
               alert('Must be image');
            }
         })

         const command = ['dragleave', 'dragend']

         command.forEach(item=> {
            dropArea.addEventListener(item, function () {
               this.style.borderStyle = 'dashed';

               const h3 = this.querySelector('h3');
               h3.textContent = 'Drag and drop or click here to select image';
            })
         })

         function create_thumbnail(file) {
            const img = document.querySelectorAll('.thumbnail');
            const imgName = document.querySelectorAll('.img-name');
            img.forEach(item=> item.remove());
            imgName.forEach(item=> item.remove());

            const reader = new FileReader();
            reader.onload = ()=> {
               const url = reader.result;
               const img = document.createElement('img');
               img.src = url;
               img.className = 'thumbnail'
               const span = document.createElement('span');
               span.className = 'img-name';
               span.textContent = file.name;
               dropArea.appendChild(img);
               dropArea.appendChild(span);
               dropArea.style.borderColor = 'transparent';
            }
            reader.readAsDataURL(file);
         }

         /*manage users*/
         jQuery(document).ready(function (e) {
    function t(t) {
        e(t).bind("click", function (t) {
            t.preventDefault();
            e(this).parent().fadeOut()
        })
    }
    e(".dropdown-toggle").click(function () {
        var t = e(this).parents(".button-dropdown").children(".dropdown-menu").is(":hidden");
        e(".button-dropdown .dropdown-menu").hide();
        e(".button-dropdown .dropdown-toggle").removeClass("active");
        if (t) {
            e(this).parents(".button-dropdown").children(".dropdown-menu").toggle().parents(".button-dropdown").children(".dropdown-toggle").addClass("active")
        }
    });
    e(document).bind("click", function (t) {
        var n = e(t.target);
        if (!n.parents().hasClass("button-dropdown")) e(".button-dropdown .dropdown-menu").hide();
    });
    e(document).bind("click", function (t) {
        var n = e(t.target);
        if (!n.parents().hasClass("button-dropdown")) e(".button-dropdown .dropdown-toggle").removeClass("active");
    })
});
          //edit villa accordion
          var accordion = (function(){
          var $accordion = $('.js-accordion');
          var $accordion_header = $accordion.find('.js-accordion-header');
          var $accordion_item = $('.js-accordion-item');
        
          // default settings 
          var settings = {
            // animation speed
            speed: 400,
            
            // close all other accordion items if true
            oneOpen: false
          };
            
          return {
            // pass configurable object literal
            init: function($settings) {
              $accordion_header.on('click', function() {
                accordion.toggle($(this));
              });
              
              $.extend(settings, $settings); 
              
              // ensure only one accordion is active if oneOpen is true
              if(settings.oneOpen && $('.js-accordion-item.active').length > 1) {
                $('.js-accordion-item.active:not(:first)').removeClass('active');
              }
              
              // reveal the active accordion bodies
              $('.js-accordion-item.active').find('> .js-accordion-body').show();
            },
            toggle: function($this) {
                    
              if(settings.oneOpen && $this[0] != $this.closest('.js-accordion').find('> .js-accordion-item.active > .js-accordion-header')[0]) {
                $this.closest('.js-accordion')
                      .find('> .js-accordion-item') 
                      .removeClass('active')
                      .find('.js-accordion-body')
                      .slideUp()
              }
              
              // show/hide the clicked accordion item
              $this.closest('.js-accordion-item').toggleClass('active');
              $this.next().stop().slideToggle(settings.speed);
            }
          }
        })();

        $(document).ready(function(){
          accordion.init({ speed: 300, oneOpen: true });
        });

        //villa upload photos
        function initImageUpload(box) {
        let uploadField = box.querySelector('.image-upload');

        uploadField.addEventListener('change', getFile);

        function getFile(e){
          let file = e.currentTarget.files[0];
          checkType(file);
        }
        
        function previewImage(file){
          let thumb = box.querySelector('.js--image-preview'),
              reader = new FileReader();

          reader.onload = function() {
            thumb.style.backgroundImage = 'url(' + reader.result + ')';
          }
          reader.readAsDataURL(file);
          thumb.className += ' js--no-default';
        }

        function checkType(file){
          let imageType = /image.*/;
          if (!file.type.match(imageType)) {
            throw 'Datei ist kein Bild';
          } else if (!file){
            throw 'Kein Bild gewählt';
          } else {
            previewImage(file);
          }
        }
      }

      // initialize box-scope
      var boxes = document.querySelectorAll('.box');

      for (let i = 0; i < boxes.length; i++) {
        let box = boxes[i];
        initDropEffect(box);
        initImageUpload(box);
      }

      /// drop-effect
      function initDropEffect(box){
        let area, drop, areaWidth, areaHeight, maxDistance, dropWidth, dropHeight, x, y;
        
        // get clickable area for drop effect
        area = box.querySelector('.js--image-preview');
        area.addEventListener('click', fireRipple);
        
        function fireRipple(e){
          area = e.currentTarget
          // create drop
          if(!drop){
            drop = document.createElement('span');
            drop.className = 'drop';
            this.appendChild(drop);
          }
          // reset animate class
          drop.className = 'drop';
          
          // calculate dimensions of area (longest side)
          areaWidth = getComputedStyle(this, null).getPropertyValue("width");
          areaHeight = getComputedStyle(this, null).getPropertyValue("height");
          maxDistance = Math.max(parseInt(areaWidth, 10), parseInt(areaHeight, 10));

          // set drop dimensions to fill area
          drop.style.width = maxDistance + 'px';
          drop.style.height = maxDistance + 'px';
          
          // calculate dimensions of drop
          dropWidth = getComputedStyle(this, null).getPropertyValue("width");
          dropHeight = getComputedStyle(this, null).getPropertyValue("height");
          
          // calculate relative coordinates of click
          // logic: click coordinates relative to page - parent's position relative to page - half of self height/width to make it controllable from the center
          x = e.pageX - this.offsetLeft - (parseInt(dropWidth, 10)/2);
          y = e.pageY - this.offsetTop - (parseInt(dropHeight, 10)/2) - 30;
          
          // position drop and animate
          drop.style.top = y + 'px';
          drop.style.left = x + 'px';
          drop.className += ' animate';
          e.stopPropagation();
        }
      }
    </script>
  </body>
</html>
